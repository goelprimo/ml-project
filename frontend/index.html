<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AI Course Recommender</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="relative min-h-screen overflow-y-auto bg-gradient-to-br from-black via-gray-900 to-purple-950 flex items-start justify-center p-4">

<div class="particles"></div>

<div class="relative z-10 bg-black/80 backdrop-blur-xl p-5 sm:p-8 rounded-3xl shadow-[0_0_45px_#7c3aed] w-full max-w-full sm:max-w-7xl">

  <h1 class="text-4xl font-bold text-center text-white mb-2">
    ðŸŽ“ AI Course Recommendation
  </h1>

  <p class="text-center text-gray-400 mb-6">
    Find the best online courses based on your interests!
  </p>

  <div class="flex flex-wrap justify-center gap-3 mb-6">
    <span class="chip">Python</span>
    <span class="chip">AI / ML</span>
    <span class="chip">Web Development</span>
    <span class="chip">Data Science</span>
    <span class="chip">UI / UX</span>
    <span class="chip">Cloud / AWS</span>
  </div>

  <input
    id="search"
    type="text"
    placeholder="Type and press Enter (eg: data science course, web developer, ai)"
    class="w-full p-4 rounded-xl bg-gray-900 text-white border border-purple-700 focus:ring-2 focus:ring-purple-500"
  >

  <button
    onclick="recommend()"
    class="mt-5 w-full bg-purple-700 text-white py-3 rounded-xl text-lg transition hover:shadow-[0_0_30px_#a855f7]"
  >
    Find Courses
  </button>

  <p id="msg" class="mt-8 text-center text-purple-300 font-semibold"></p>

  <div
    id="result"
    class="mt-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8"
  ></div>

</div>

<script>
/* ===============================
   BACKEND API URL
   =============================== */
const API_URL = "http://localhost:5000/recommend"; 
// Change this when deployed

function cleanText(text) {
  return text.trim();
}

async function recommend() {
  const input = cleanText(document.getElementById("search").value);
  const result = document.getElementById("result");
  const msg = document.getElementById("msg");

  result.innerHTML = "";
  msg.textContent = "";

  if (!input) {
    msg.textContent = "âš ï¸ Please enter something to search.";
    return;
  }

  msg.textContent = "ðŸ” Finding best courses for you...";

  try {
    const response = await fetch(API_URL, {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ query: input })
    });

    const data = await response.json();

    if (!data.success || !data.courses || data.courses.length === 0) {
      msg.textContent = "âŒ No recommendations found.";
      return;
    }

    msg.textContent = "âœ… Based on your interest, we recommend ðŸ‘‡";

    data.courses.forEach(course => {
      result.innerHTML += `
        <div class="bg-gray-900 rounded-2xl overflow-hidden transition hover:scale-105 hover:shadow-[0_0_30px_#a855f7]">
          <img src="${course.img}" class="h-40 w-full object-cover">
          <div class="p-4 text-white">
            <p class="font-semibold">${course.name}</p>
            <a href="${course.link}" target="_blank"
              class="block mt-3 bg-purple-700 text-center py-2 rounded-lg hover:shadow-[0_0_20px_#a855f7]">
              View Course
            </a>
          </div>
        </div>
      `;
    });

  } catch (error) {
    console.error(error);
    msg.textContent = "ðŸš¨ Unable to connect to server.";
  }
}

document.getElementById("search").addEventListener("keydown", e => {
  if (e.key === "Enter") recommend();
});
</script>

<style>
.chip {
  padding: 6px 14px;
  border-radius: 9999px;
  border: 1px solid #a855f7;
  color: #e9d5ff;
  background: rgba(168, 85, 247, .2);
}

.particles::before,
.particles::after {
  content: "";
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 20% 30%, rgba(168,85,247,.15), transparent 40%),
    radial-gradient(circle at 80% 70%, rgba(236,72,153,.15), transparent 40%);
  animation: float 10s linear infinite;
}

@keyframes float {
  0%   { transform: translateY(0); }
  50%  { transform: translateY(-30px); }
  100% { transform: translateY(0); }
}
</style>

</body>
</html>
